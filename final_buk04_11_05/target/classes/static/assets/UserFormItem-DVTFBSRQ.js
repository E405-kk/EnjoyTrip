import{H as P,I as U,r as a,o as V,w,b as i,c as n,e as t,F,m as d,v as c,K as k,t as D,n as j,k as b,S as r}from"./index-CmhezA2U.js";const q={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},K={class:"space-y-6"},T={class:"w-60 mx-auto flex flex-col items-center justify-center px-4 py-6 bg-white text-blue rounded-lg shadow-lg tracking-wide uppercase border border-blue cursor-pointer hover:bg-blue hover:text-white"},A={key:0},J=["src"],R=t("svg",{class:"w-10 h-10",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})],-1),z=t("span",{class:"mt-2 text-base leading-normal"}," 사진 업로드",-1),H=t("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},"이름 : ",-1),O={class:"mt-2"},L=t("label",{for:"userid",class:"inline text-sm font-medium leading-6 text-gray-900"},"아이디 : ",-1),W={key:1},G=t("label",{for:"userpwd",class:"block text-sm font-medium leading-6 text-gray-900"},"비밀번호 : ",-1),Q={class:"mt-2"},X=t("label",{for:"pwdcheck",class:"block text-sm font-medium leading-6 text-gray-900"},"비밀번호 확인: ",-1),Y={class:"mt-2"},Z=t("label",{for:"useremail",class:"block text-sm font-medium leading-6 text-gray-900"},"이메일: ",-1),$={class:"mt-2"},ee=["onKeyup"],te={class:"col-auto text-center"},le={__name:"UserFormItem",props:{type:String},setup(m){const x=P(),{userInfo:I}=U(x),{userJoin:B,userModify:C}=x,_=m,g=a(""),u=a(""),s=a({userId:"",userPwd:"",userName:"",userEmail:"",img:""});V(()=>{_.type==="modify"&&(s.value=I.value,N())});const M=async()=>{var l=new FormData,e=document.getElementById("photo");const o=new Blob([JSON.stringify(s.value)],{type:"application/json"}),h={headers:{"Content-Type":"multipart/form-data"}};l.append("file",e.files[0]),l.append("userDto",o),await B(l,h),r.fire({icon:"success",title:"회원가입이 완료되었습니다.",showConfirmButton:!1,timer:1500})},E=async()=>{if(g.value===s.value.userPwd){var l=new FormData,e=document.getElementById("photo");const o=new Blob([JSON.stringify(s.value)],{type:"application/json"}),h={headers:{"Content-Type":"multipart/form-data"}};l.append("file",e.files[0]),l.append("userDto",o),await C(l,h),r.fire({icon:"success",title:"회원정보가 수정되었습니다.",showConfirmButton:!1,timer:1500})}else{r.fire("비밀번호를 다시 확인해주세요.");return}},f=a(""),p=a(""),v=a("");w(()=>s.value.userName,l=>{let e=l.length;e==0||e>30?f.value="이름을 입력해 주세요!":f.value=""},{immediate:!0}),w(()=>s.value.userId,l=>{let e=l.length;e==0||e>500?p.value="아이디를 입력해 주세요!":p.value=""},{immediate:!0}),w(()=>s.value.userPwd,l=>{let e=l.length;e==0||e>500?v.value="비밀번호를 입력해 주세요!":v.value=""},{immediate:!0});function y(){f.value?r.fire(f.value):p.value?r.fire(p.value):v.value?r.fire(v.value):g.value!==s.value.userPwd?r.fire("비밀번호를 다시 확인해주세요!"):_.type==="regist"?M():E()}const S=l=>{const e=l.target.files[0];if(e&&e.type.startsWith("image/")){const o=new FileReader;o.readAsDataURL(e),o.onload=()=>{u.value=o.result}}else console.error("이미지 파일을 선택해주세요.")};function N(){if(s.value==null)return null;if(s.value.img!=null){var l="/src/assets/users/";return l+=s.value.img,u.value=l,l}else return u.value="/src/assets/user.png","/src/assets/user.png"}return(l,e)=>(i(),n("form",null,[t("div",q,[t("div",K,[t("label",T,[u.value?(i(),n("div",A,[t("img",{src:u.value,class:"fluid-container"},null,8,J)])):(i(),n(F,{key:1},[R,z],64)),t("input",{type:"file",class:"hidden",name:"photo",id:"photo",onChange:S,accept:"image/*"},null,32)]),t("div",null,[H,t("div",O,[d(t("input",{type:"text",class:"pl-3 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"이름...",required:"","onUpdate:modelValue":e[0]||(e[0]=o=>s.value.userName=o)},null,512),[[c,s.value.userName]])])]),t("div",null,[L,m.type==="regist"?d((i(),n("input",{key:0,type:"text",class:"mt-2 pl-3 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"아이디...","onUpdate:modelValue":e[1]||(e[1]=o=>s.value.userId=o),required:""},null,512)),[[c,s.value.userId]]):k("",!0),m.type==="modify"?(i(),n("span",W,D(s.value.userId),1)):k("",!0)]),t("div",null,[G,t("div",Q,[d(t("input",{type:"password",class:"pl-3 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"비밀번호...",required:"","onUpdate:modelValue":e[2]||(e[2]=o=>s.value.userPwd=o)},null,512),[[c,s.value.userPwd]])])]),t("div",null,[X,t("div",Y,[d(t("input",{type:"password",class:"pl-3 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"비밀번호 확인...",required:"","onUpdate:modelValue":e[3]||(e[3]=o=>g.value=o)},null,512),[[c,g.value]])])]),t("div",null,[Z,t("div",$,[d(t("input",{type:"text",class:"pl-3 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"이메일...",required:"",onKeyup:j(b(y,["prevent"]),["enter"]),"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.userEmail=o)},null,40,ee),[[c,s.value.userEmail]])])]),t("div",te,[m.type==="regist"?(i(),n("button",{key:0,type:"submit",class:"flex w-full justify-center bg-green-500 rounded-md px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-green-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:b(y,["prevent"])}," 회원가입 ")):(i(),n("button",{key:1,type:"submit",class:"flex w-full justify-center bg-green-500 rounded-md px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-green-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:b(y,["prevent"])}," 수정 "))])])])]))}};export{le as _};
