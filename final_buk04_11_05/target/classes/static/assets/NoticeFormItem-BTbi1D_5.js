import{x as j,N as I,r,w as x,b as c,c as d,e as s,m as b,v,k as S,S as l}from"./index-CmhezA2U.js";import{g as A,r as B,m as M}from"./notice-LW7AepxO.js";const N={class:"min-h-screen md:px-20 pt-6"},C={class:"border bg-white rounded-md px-6 py-10 max-w-2xl mx-auto"},E={class:"flex"},U={class:"flex-1 space-y-4"},V=s("label",{for:"subject",class:"text-lx"},"제목:",-1),R=s("label",{for:"content",class:"block mb-2 text-lg"},"내용:",-1),T={class:"mt-6 text-center"},D={key:0,type:"submit",class:"px-6 py-2 mx-auto rounded-md text-lg font-semibold text-emerald-50 bg-emerald-600"},F={key:1,type:"submit",class:"px-6 py-2 mx-auto rounded-md text-lg font-semibold text-emerald-50 bg-emerald-600"},z={__name:"NoticeFormItem",props:{type:String},setup(m){const g=j(),y=I(),_=sessionStorage.getItem("userId"),f=m,p=r(!1),o=r({articleNo:0,subject:"",content:"",userId:_,userName:"",hit:0,registerTime:""});if(f.type==="modify"){let{articleno:t}=y.params;A(t,({data:e})=>{o.value=e,p.value=!0},e=>{console.log(e)}),p.value=!0}const n=r(""),i=r("");x(()=>o.value.subject,t=>{let e=t.length;e==0||e>30?n.value="제목을 확인해 주세요!!!":n.value=""},{immediate:!0}),x(()=>o.value.content,t=>{let e=t.length;e==0||e>500?i.value="내용을 확인해 주세요!!!":i.value=""},{immediate:!0});function h(){n.value?l.fire(n.value):i.value?l.fire(i.value):f.type==="regist"?w():k()}function w(){B(o.value,t=>{let e=t.data;t.status==201?(e="글등록이 완료되었습니다.",l.fire({icon:"success",title:e,showConfirmButton:!1,timer:1500}),a()):l.fire({icon:"error",text:e})},t=>console.log(t))}function k(){M(o.value,t=>{let e="글수정에 실패했습니다.";t.status==200?(e="글이 수정되었습니다.",l.fire({icon:"success",title:e,showConfirmButton:!1,timer:1500})):l.fire({icon:"error",text:e}),a()},t=>console.log(t))}function a(){g.replace({name:"notice-list"})}return(t,e)=>(c(),d("form",{onSubmit:S(h,["prevent"])},[s("div",N,[s("div",C,[s("div",E,[s("div",U,[s("div",null,[V,b(s("input",{type:"text",placeholder:"제목...",id:"subject","onUpdate:modelValue":e[0]||(e[0]=u=>o.value.subject=u),class:"mt-2 outline-none py-2 px-2 text-md border-2 rounded-md w-full"},null,512),[[v,o.value.subject]])]),s("div",null,[R,b(s("textarea",{id:"content",cols:"30",rows:"10","onUpdate:modelValue":e[1]||(e[1]=u=>o.value.content=u),class:"w-full p-4 text-gray-600 bg-emerald-50 outline-none rounded-md"},null,512),[[v,o.value.content]])])])]),s("div",T,[m.type==="regist"?(c(),d("button",D," 글작성 ")):(c(),d("button",F," 글수정 ")),s("button",{type:"button",class:"inline-flex px-6 py-2 ml-3 block border rounded-md text-lg font-semibold text-emerald-600 bg-white-100",onClick:a}," 목록으로이동... ")])])])],32))}};export{z as _};
