import{H as j,I,x as B,N as M,r as i,w as b,b as c,c as d,e as s,m as x,v,k as A,S as l}from"./index-CmhezA2U.js";import{g as N,r as C,m as E}from"./board-DkxEk9Zx.js";const R={class:"min-h-screen md:px-20 pt-6"},T={class:"border bg-white rounded-md px-6 py-10 max-w-2xl mx-auto"},U={class:"flex"},V={class:"flex-1 space-y-4"},D=s("label",{for:"subject",class:"text-lx"},"제목:",-1),F=s("label",{for:"content",class:"block mb-2 text-lg"},"내용:",-1),H={class:"mt-6 text-center"},L={key:0,type:"submit",class:"px-6 py-2 mx-auto rounded-md text-lg font-semibold text-emerald-50 bg-emerald-600"},q={key:1,type:"submit",class:"px-6 py-2 mx-auto rounded-md text-lg font-semibold text-emerald-50 bg-emerald-600"},J={__name:"BoardFormItem",props:{type:String},setup(m){const g=j(),{userInfo:y}=I(g),_=B(),h=M(),f=m,p=i(!1),o=i({articleNo:0,subject:"",content:"",userId:sessionStorage.getItem("userId"),userName:"",hit:0,registerTime:"",img:y.value.img});if(f.type==="modify"){let{articleno:t}=h.params;N(t,({data:e})=>{o.value=e,p.value=!0},e=>{console.log(e)}),p.value=!0}const r=i(""),n=i("");b(()=>o.value.subject,t=>{let e=t.length;e==0||e>30?r.value="제목을 입력해 주세요!":r.value=""},{immediate:!0}),b(()=>o.value.content,t=>{let e=t.length;e==0||e>500?n.value="내용을 입력해 주세요!":n.value=""},{immediate:!0});function w(){r.value?l.fire(r.value):n.value?l.fire(n.value):f.type==="regist"?k():S()}function k(){C(o.value,t=>{let e=t.data;t.status==201?(e="글등록이 완료되었습니다.",l.fire({icon:"success",title:e,showConfirmButton:!1,timer:1500}),a()):l.fire({icon:"error",text:e})},t=>console.log(t))}function S(){E(o.value,t=>{let e="글수정에 실패했습니다.";t.status==200?(e="글이 수정되었습니다.",l.fire({icon:"success",title:e,showConfirmButton:!1,timer:1500})):l.fire({icon:"error",text:e}),a()},t=>console.log(t))}function a(){_.replace({name:"article-list"})}return(t,e)=>(c(),d("form",{onSubmit:A(w,["prevent"])},[s("div",R,[s("div",T,[s("div",U,[s("div",V,[s("div",null,[D,x(s("input",{type:"text",placeholder:"제목...",id:"subject","onUpdate:modelValue":e[0]||(e[0]=u=>o.value.subject=u),class:"mt-2 outline-none py-2 px-2 text-md border-2 rounded-md w-full"},null,512),[[v,o.value.subject]])]),s("div",null,[F,x(s("textarea",{id:"content",cols:"30",rows:"10","onUpdate:modelValue":e[1]||(e[1]=u=>o.value.content=u),class:"w-full p-4 text-gray-600 bg-emerald-50 outline-none rounded-md"},null,512),[[v,o.value.content]])])])]),s("div",H,[m.type==="regist"?(c(),d("button",L," 글작성 ")):(c(),d("button",q," 글수정 ")),s("button",{type:"button",class:"inline-flex px-6 py-2 ml-3 block border rounded-md text-lg font-semibold text-emerald-600 bg-white-100",onClick:a}," 목록으로이동... ")])])])],32))}};export{J as _};
