import{r as d,w as S,o as T,b as h,c as g,l as B,e as a,k as O,i as L,m as z,v as A,n as j,F as I,p as K,q as V,t as C}from"./index-BWaCr9_N.js";import{_ as E}from"./VSelect-OShSSaR7.js";const N={id:"map"},q={__name:"VKakaoMap",props:{stations:Array,selectStation:Object},setup(M){var l,c;const o=d([]),n=d([]),r=d([]),u=M;S(()=>u.selectStation.value,()=>{var e=new kakao.maps.LatLng(u.selectStation.latitude,u.selectStation.longitude);l.panTo(e)},{deep:!0}),T(()=>{if(window.kakao&&window.kakao.maps)x();else{const e=document.createElement("script");e.src="//dapi.kakao.com/v2/maps/sdk.js?autoload=false&appkey=d234049397979f6f3e7cf5e308e8acea&libraries=services,clusterer",e.onload=()=>kakao.maps.load(()=>x()),document.head.appendChild(e)}}),S(()=>u.stations.value,()=>{o.value=[],u.stations.forEach(e=>{let s={};s.latlng=new kakao.maps.LatLng(e.latitude,e.longitude),s.title=e.title,s.contentTypeId=e.contentTypeId,s.firstImage=e.firstImage,s.addr1=e.addr1,s.addr2=e.addr2,s.zipcode=e.zipcode,s.tel=e.tel,s.overview=e.overview,o.value.push(s)}),_()},{deep:!0});const x=()=>{const e=document.getElementById("map"),s={center:new kakao.maps.LatLng(33.450701,126.570667),level:7};l=new kakao.maps.Map(e,s),c=new kakao.maps.MarkerClusterer({map:l,averageCenter:!1,minLevel:7})},_=()=>{k(),y(c);const e=new kakao.maps.Size(25,25);n.value=[],r.value=[],o.value.forEach(t=>{var i="/src/assets/img_marker";i+=t.contentTypeId,i+=".png";const w=new kakao.maps.MarkerImage(i,e),v=new kakao.maps.Marker({map:l,position:t.latlng,title:t.title,clickable:!0,image:w});var m=t.firstImage;m==""&&(m="/src/assets/bg-white.png");var p=`        <div class="mb-10" style="padding: 5px;">           <div> ${t.title} </div>           <img src="${m}" class="m-auto" width="150px" height="auto"/>        <div>${t.addr1}</div> </div>`,f=new kakao.maps.InfoWindow({content:p});r.value.push(f),n.value.push(v)});for(let t=0;t<o.value.length;t++)kakao.maps.event.addListener(n.value[t],"mouseover",function(){r.value[t].open(l,n.value[t])}),kakao.maps.event.addListener(n.value[t],"mouseout",function(){r.value[t].close()}),kakao.maps.event.addListener(n.value[t],"click",function(){r.value[t].close();var i=`    <a href="#">       <h5 class="text-gray-900 font-bold text-2xl tracking-tight mb-2 dark:text-white">${o.value[t].title}</h5>   </a><div>${o.value[t].addr1}</div>   <p class="font-normal text-gray-700 mb-3 dark:text-gray-400 overflow-content ">${o.value[t].overview}</p>   <a href="https://search.naver.com/search.naver?&query=${o.value[t].title}" target="_blank" class="text-white bg-green-600 hover:bg-green-500 focus:ring-4 focus:ring-green-300 font-medium rounded-lg text-sm px-3 py-2 text-center inline-flex items-center  dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800">       Read more       <svg class="-mr-1 ml-2 h-4 w-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>   </a>`,w=new kakao.maps.CustomOverlay({position:n.value[t].n,map:l});c.clear();var v=document.createElement("div");v.setAttribute("class","scrollbar custom-overlay z-100 bg-white shadow-md border border-gray-200 rounded-lg max-w-sm dark:bg-gray-800 dark:border-gray-700");var m=document.createElement("img");m.setAttribute("class","rounded-t-lg"),m.setAttribute("src",`${o.value[t].firstImage}`);var p=document.createElement("div");p.setAttribute("class","p-5");var f=document.createElement("div");f.innerHTML=i,f.setAttribute("class","body");var b=document.createElement("div");b.setAttribute("class","close"),b.onclick=function(){w.setMap(null),_()},v.appendChild(m),v.appendChild(p),p.appendChild(b),p.appendChild(f),w.setContent(v),w.setMap(l),v.addEventListener("wheel",function($){$.stopPropagation()})});c.addMarkers(n.value);const s=o.value.reduce((t,i)=>t.extend(i.latlng),new kakao.maps.LatLngBounds);l.setBounds(s)},k=()=>{n.value.length>0&&n.value.forEach(e=>e.setMap(null))};function y(e){e.clear()}return(e,s)=>(h(),g("div",N))}},D=a("div",{class:"my-5 text-center font-semibold text-xl"},"전국 관광지 정보",-1),F={class:"fluid-container text-center mt-3 mx-auto w-9/12"},H={class:"flex items-center justify-center mb-10"},P={class:"mx-auto"},R={class:"flex items-center max-w-md mx-auto bg-white rounded-lg","x-data":"{ search: '' }"},U={class:"w-full"},W=a("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),G=[W],J={key:0,class:"my-5"},Q={key:1,class:"bg-white my-5"},X={class:"overflow-x-auto border-x border-t scrollbar",style:{width:"100%",height:"500px",overflow:"auto"}},Y={class:"table-auto w-full"},Z=a("thead",{class:"border-b"},[a("tr",{class:"bg-emerald-500 text-white"},[a("th",{class:"text-center p-4 font-medium"},"대표이미지"),a("th",{class:"text-center p-4 font-medium"},"관광지명"),a("th",{class:"text-center p-4 font-medium"},"주소")])],-1),ee={class:"overflow-y-scroll w-full"},te=["onClick"],ae={class:"p-2",style:{width:"100px"}},se=["src"],oe={class:"p-3",style:{width:"200px"}},ne={class:"p-3",style:{width:"300px"}},ce={__name:"TripSearch",setup(M){const l=d([]),c=d([]),o=d({}),n=d([{text:"관광지 유형",value:0},{text:"관광지",value:12},{text:"문화시설",value:14},{text:"축제공연행사",value:15},{text:"여행코스",value:25},{text:"레포츠",value:28},{text:"숙박",value:32},{text:"쇼핑",value:38},{text:"음식점",value:39}]),r=d({sidoCode:0,contentTypeId:0,keyword:""});T(()=>{u()});const u=()=>{B(({data:e})=>{let s=[];s.push({text:"시도선택",value:""}),e.forEach(t=>{s.push({text:t.sidoName,value:t.sidoCode})}),l.value=s},e=>{console.log(e)})},x=e=>{r.value.sidoCode=e},_=e=>{r.value.contentTypeId=e},k=()=>{V(r.value,({data:e})=>{console.log(e),c.value=e},e=>{console.log(e)})},y=e=>{o.value=e};return(e,s)=>(h(),g(I,null,[D,a("div",F,[a("div",H,[a("div",P,[a("form",{class:"flex",onSubmit:O(k,["prevent"])},[L(E,{selectOption:l.value,onOnKeySelect:x},null,8,["selectOption"]),L(E,{selectOption:n.value,onOnKeySelect:_},null,8,["selectOption"]),a("div",R,[a("div",U,[z(a("input",{type:"search",class:"w-full px-4 py-1 text-gray-800 rounded-full focus:outline-none",placeholder:"search","x-model":"search","onUpdate:modelValue":s[0]||(s[0]=t=>r.value.keyword=t),onKeyup:j(k,["enter"])},null,544),[[A,r.value.keyword]])]),a("div",null,[a("button",{type:"button",class:"flex items-center bg-emerald-500 justify-center w-12 h-12 text-white rounded-r-lg",onClick:k},G)])])],32)])]),L(q,{stations:c.value,selectStation:o.value},null,8,["stations","selectStation"]),c.value.length===0?(h(),g("div",J)):(h(),g("div",Q,[a("div",X,[a("table",Y,[Z,a("tbody",ee,[(h(!0),g(I,null,K(c.value,t=>(h(),g("tr",{class:"text-center border-b hover:bg-gray-50",key:t.contentId,onClick:i=>y(t)},[a("td",ae,[a("img",{src:t.firstImage},null,8,se)]),a("td",oe,C(t.title),1),a("td",ne,C(t.addr1)+" "+C(t.addr2),1)],8,te))),128))])])])]))])],64))}};export{ce as default};
