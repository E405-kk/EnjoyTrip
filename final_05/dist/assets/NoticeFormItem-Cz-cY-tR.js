import{z as I,N as M,x as A,y as B,r as i,w as b,b as c,c as d,e as s,m as x,v,k as N,S as l}from"./index-BWaCr9_N.js";import{g as C,r as E,m as R}from"./notice-B16u_sLm.js";const T={class:"min-h-screen md:px-20 pt-6"},U={class:"border bg-white rounded-md px-6 py-10 max-w-2xl mx-auto"},V={class:"flex"},z={class:"flex-1 space-y-4"},D=s("label",{for:"subject",class:"text-lx"},"제목:",-1),F=s("label",{for:"content",class:"block mb-2 text-lg"},"내용:",-1),L={class:"mt-6 text-center"},q={key:0,type:"submit",class:"px-6 py-2 mx-auto rounded-md text-lg font-semibold text-emerald-50 bg-emerald-600"},G={key:1,type:"submit",class:"px-6 py-2 mx-auto rounded-md text-lg font-semibold text-emerald-50 bg-emerald-600"},K={__name:"NoticeFormItem",props:{type:String},setup(m){const g=I(),y=M(),_=A(),{userInfo:h}=B(_),w=h.value.userId,f=m,p=i(!1),o=i({articleNo:0,subject:"",content:"",userId:w,userName:"",hit:0,registerTime:""});if(f.type==="modify"){let{articleno:t}=y.params;C(t,({data:e})=>{o.value=e,p.value=!0},e=>{console.log(e)}),p.value=!0}const n=i(""),r=i("");b(()=>o.value.subject,t=>{let e=t.length;e==0||e>30?n.value="제목을 확인해 주세요!!!":n.value=""},{immediate:!0}),b(()=>o.value.content,t=>{let e=t.length;e==0||e>500?r.value="내용을 확인해 주세요!!!":r.value=""},{immediate:!0});function k(){n.value?l.fire(n.value):r.value?l.fire(r.value):f.type==="regist"?j():S()}function j(){E(o.value,t=>{let e=t.data;t.status==201?(e="글등록이 완료되었습니다.",l.fire({icon:"success",title:e,showConfirmButton:!1,timer:1500}),a()):l.fire({icon:"error",text:e})},t=>console.log(t))}function S(){R(o.value,t=>{let e="글수정에 실패했습니다.";t.status==200?(e="글이 수정되었습니다.",l.fire({icon:"success",title:e,showConfirmButton:!1,timer:1500})):l.fire({icon:"error",text:e}),a()},t=>console.log(t))}function a(){g.replace({name:"notice-list"})}return(t,e)=>(c(),d("form",{onSubmit:N(k,["prevent"])},[s("div",T,[s("div",U,[s("div",V,[s("div",z,[s("div",null,[D,x(s("input",{type:"text",placeholder:"제목...",id:"subject","onUpdate:modelValue":e[0]||(e[0]=u=>o.value.subject=u),class:"mt-2 outline-none py-2 px-2 text-md border-2 rounded-md w-full"},null,512),[[v,o.value.subject]])]),s("div",null,[F,x(s("textarea",{id:"content",cols:"30",rows:"10","onUpdate:modelValue":e[1]||(e[1]=u=>o.value.content=u),class:"w-full p-4 text-gray-600 bg-emerald-50 outline-none rounded-md"},null,512),[[v,o.value.content]])])])]),s("div",L,[m.type==="regist"?(c(),d("button",q," 글작성 ")):(c(),d("button",G," 글수정 ")),s("button",{type:"button",class:"inline-flex px-6 py-2 ml-3 block border rounded-md text-lg font-semibold text-emerald-600 bg-white-100",onClick:a}," 목록으로이동... ")])])])],32))}};export{K as _};
